<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.steelrain.springboot.lilac.mapper.VideoMapper">
    <select id="findRecommendedVideoList" resultType="YoutubeVideoDTO">
        SELECT youtube.id,video_id,channel_id,youtube_playlist_id,title,
               description,publish_date,rvideo.reg_date,
               thumbnail_default,thumbnail_medium,thumbnail_high,
               playlist_id,view_count,search_count,like_count,favorite_count,
               comment_count,duration,score,magnitude
        FROM tbl_recommended_video rvideo INNER JOIN tbl_youtube youtube
            ON rvideo.youtube_id=youtube.id;
    </select>
<!--
private Long id;
    private String videoId;
    private Long channelId;
    private Long YoutubePlaylistId;
    private String title;
    private String description;
    private Timestamp publishDate;
    private Timestamp regDate;
    private String thumbnailDefault;
    private String thumbnailMedium;
    private String thumbnailHigh;
    private String playlistId;
    private Long viewCount;
    private Integer searchCount;
    private Long likeCount;
    private Long favoriteCount;
    private Long commentCount;
    private String duration;
    private Float score;
    private Float magnitude;
-->
    <select id="findPlayListDetail" parameterType="java.lang.Long" resultType="YoutubeVideoDTO">
        SELECT yt.id,yt.video_id,yt.channel_id,yt.youtube_playlist_id,yt.title,yt.description,yt.publish_date,
               yt.thumbnail_default,yt.thumbnail_high,yt.playlist_id,yt.view_count,yt.search_count,yt.like_count,yt.favorite_count,yt.comment_count,
               yt.duration,yt.score,yt.magnitude
        FROM tbl_youtube yt INNER JOIN tbl_youtube_playlist pl
            ON yt.youtube_playlist_id=pl.id
        WHERE pl.id=#{playlistId};
    </select>

    <select id="findPlayListByKeyword" parameterType="java.lang.String" resultType="YoutubePlaylistDTO">
        SELECT id,playlist_id,channel_id,title,publish_date,thumbnail_medium,thumbnail_high,item_count,reg_date
        FROM tbl_youtube_playlist pl
        WHERE pl.title LIKE concat('%',#{keyword},'%')
        ORDER BY pl.publish_date LIMIT 0,8;
    </select>
</mapper>